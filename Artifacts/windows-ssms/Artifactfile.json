{
  "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2016-11-28/dtlArtifacts.json",
  "title": "SQL SSMS (Modern)",
  "description": "Installs Sql Server Management Studio 21.x",
  "publisher": "Eric Côté",
  "tags": [
    "SQL",
    "SSMS",
    "Management Studio"
  ],
  "iconUri": "https://github.com/EricCote/DevTestLabs/raw/master/Artifacts/windows-ssms/ssms.png",
  "parameters": {
    "Edition": {
      "type": "string",
      "displayName": "Edition",
      "description": "Edition (SSMS)",
      "allowedValues": [
        "SSMS"
      ],
      "defaultValue": "SSMS"
    },
    "Version": {
      "type": "string",
      "displayName": "Version",
      "description": "Ssms version (21.0, 22.0)",
      "allowedValues": [
        "21",
        "22"
      ],
      "defaultValue": "21"
    },
    "Channel": {
      "type": "string",
      "displayName": "Channel",
      "description": "Install from latest release channel, or from preview channel?",
      "allowedValues": [
        "Release",
        "Preview"
      ],
      "defaultValue": "Release"
    },
    "Workloads": {
      "type": "string",
      "displayName": "Workloads",
      "description": "Select the workloads to install.",
      "defaultValue": "Select Below",
      "allowedValues": [
        "Select Below",
        "All Workloads",
        "All with Recommended",
        "All with Optional",
        "All with Recommended and Optional",
        "Complete"
      ],
      "allowEmpty": true
    },
    "WorkloadList": {
      "type": "string",
      "displayName": "Workload List",
      "description": "sdffs",
      "defaultValue": "AI+*,BI+*,HybridAndMigration+*,CodeTools+*",
      "allowEmpty": true
    },
    "Languages": {
      "type": "string",
      "displayName": "Languages",
      "description": "You can specify multiple languages using a comma-separated list (,). Available values are <a href='https://docs.microsoft.com/en-us/visualstudio/install/use-command-line-parameters-to-install-visual-studio?view=vs-2022#list-of-language-locales'>here</a>",
      "defaultValue": "en-US"
    },
    "Key": {
      "type": "string",
      "displayName": "Visual Studio key (optional)",
      "description": "Visual Studio key in the format aaaaa-bbbbb-ccccc-ddddd-eeeee. Leave empty for 30 day trial. No product key needed for Community edition. Switch from trial to licensed at any time using your product key or by entering your VS account credentials.",
      "allowEmpty": true,
      "defaultValue": ""
    },
    "Components": {
      "type": "string",
      "displayName": "Components",
      "description": "Ex: Microsoft.SSMS.Component.IS,Microsoft.SSMS.ComponentGroup.Copilot",
      "defaultValue": "",
      "allowEmpty": true
    },
    "Restart": {
      "type": "string",
      "displayName": "Restart",
      "description": "After install, restart the OS, if needed.",
      "defaultValue": "No restart",
      "allowedValues": [
        "Restart if needed",
        "No restart"
      ]
    }
  },
  "targetOsType": "Windows",
  "runCommand": {
    "commandToExecute": "[concat('powershell.exe -ExecutionPolicy bypass \" & ''.\\Install-ssms.ps1'' -Edition ', parameters('Edition'), ' -Version ', parameters('Version'), ' -Channel ', parameters('Channel'), ' -Workloads ''' , parameters('Workloads')  , ''' -WorkloadList ''' , parameters('WorkloadList')  , ''' -Languages ''' , parameters('Languages')  , '''  -Key ''', parameters('Key'), ''' -Components ''', parameters('Components'), '''  -Restart ''',  parameters('Restart')  , '''  \"' )]"
  }
}